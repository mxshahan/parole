{"version":3,"file":"main.2b54ae2a7083188d1da7.hot-update.js","sources":["webpack:///src/client/Components/Dashboard/AddNewContent.js"],"sourcesContent":["import React from 'react';\nimport '../../Styles/dashboard.scss';\nimport Axios from 'axios';\nimport storage from '../../Firebase/firebase';\n\nclass AddNewContent extends React.Component{\n  state = {\n    categoryList: false,\n    title: '',\n    category: '',\n    description: '',\n    parmalink: '',\n    thumbnail: '',\n    uploadStatus: null\n  }\n  componentDidMount() {\n    Axios.get(`/api/category`).then((res) => {\n      this.setState({\n        categoryList: res.data\n      })\n    }).catch((e) => {\n      console.log(e)\n    })\n  }\n\n  handleFileUpload = (e) => {\n    this.setState({\n        uploadStatus: 'Please Wait...',            \n    })\n    const file = e.target.files[0];        \n    const storageRef = storage.ref('projects/'+ file.name);\n    const task = storageRef.put(file).then((res) => {\n      this.setState({\n        uploadStatus: 'Uploaded Successfully!',\n        //Getting the uploaded file URL\n        parmalink: res.metadata.downloadURLs[0]\n      })\n    }).catch((e)=>{\n      console.log(\"Error\", e)\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('processing')\n    const body = {\n        title: this.state.title,\n        category: this.state.category,\n        description: this.state.description,\n        parmalink: this.state.parmalink\n    };\n    Axios({\n        method: 'post',\n        url: `/api/content`,\n        data: body,\n        headers: {\n            'Content-Type': 'application/json',\n            'authorization': localStorage.getItem('auth')\n        }\n    }).then((res) => {\n        console.log(res.data)\n    }).catch((e) => {\n        console.log(e)\n    })\n  }\n\n  render() {\n    return (\n    <div className=\"right-content-dashboard\" id=\"regLoginForm\">\n      <form role=\"form\" onSubmit={this.handleSubmit} >\n          <div className=\"row\">\n              <div className=\"col-md-6\">\n                  <div className=\"form-group has-success has-feedback\">\n                      <label className=\"control-label\" htmlFor=\"inputSuccess3\">Title</label>\n                      <input type=\"text\" className=\"form-control\" id=\"inputSuccess3\" required=\"required\" onChange={(e)=> {\n                          this.setState({\n                              title: e.target.value\n                          });\n                      }}/>\n                      {/* <i className=\"fa fa-check form-control-feedback\"></i> */}\n                  </div>\n              </div>\n              <div className=\"col-md-6\">\n                  <div className=\"form-group has-warning has-feedback\">\n                      <label className=\"control-label\" htmlFor=\"inputWarning3\">Category</label><br/>\n                      <select className=\"form-control\" required=\"required\" onChange={(e) => {\n                          this.setState({\n                              catagory: e.target.value\n                          })\n                      }}>\n                        <option value=\"-1\">Select a category</option>\n                        {this.state.categoryList ? \n                        this.state.categoryList.map((category) => {\n                          return <option key={category._id} value={category._id}>{category.name}</option>\n                        })\n                        : <option value=\"-1\">Loading...</option>}\n                      </select>\n                  </div>\n              </div>\n              <div className=\"col-md-12\">\n                  <div className=\"form-group has-warning has-feedback\">\n                      <label className=\"control-label\" htmlFor=\"inputError3\">Description</label>\n                      <textarea type=\"text\" className=\"form-control\" id=\"inputError3\" onChange={(e) => {\n                          this.setState({\n                              description: e.target.value\n                          })\n                      }}></textarea>\n                  </div>\n              </div>\n          </div>\n          <div className=\"row\">\n              <div className=\"col-md-12\">\n                  <div className=\"form-group\">\n                      <label className=\"control-label\" htmlFor=\"inputError3\">Upload File</label><br/>\n                      \n                      <input type=\"file\" id=\"exampleInputFile\" onChange={this.handleFileUpload}/><br/>\n                      <p className=\"help-block\">{this.state.uploadStatus ? this.state.uploadStatus : 'Upload your file'}</p>\n                      {this.state.msg && <h3 className=\"help-block\">{this.state.msg}</h3>}\n                  </div>\n              </div>\n          </div><br/>\n          {/* <div className=\"row\">\n              <div className=\"col-md-12\">\n                  <div className=\"form-group\">\n                      <label className=\"control-label\" htmlFor=\"inputError3\">Upload Thumbnail</label><br/>\n                      <input type=\"file\" id=\"exampleInputFile\" onChange={this.handleFileUpload}/><br/>\n                      <p className=\"help-block\">{this.state.uploadStatus ? this.state.uploadStatus : 'Upload your file'}</p>\n                      {this.state.msg && <h3 className=\"help-block\">{this.state.msg}</h3>}\n                  </div>\n              </div>\n          </div> */}\n          <input type=\"submit\" className=\"btn btn-primary\" defaultValue=\"Save & Publish\"/>\n      </form>\n    </div>\n    )\n  }\n}\n\nexport default AddNewContent;"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;;;;;AACA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAoBA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAJA;AASA;AACA;AACA;AACA;AACA;AA3DA;AACA;AASA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AA0CA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AANA;AADA;AAWA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAVA;AAFA;AADA;AAiBA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AANA;AADA;AA7BA;AAwCA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AALA;AADA;AADA;AAUA;AAWA;AA9DA;AADA;AAmEA;AAlIA;AACA;AAoIA;;;;A","sourceRoot":""}